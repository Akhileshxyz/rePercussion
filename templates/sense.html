{% extends 'base.html' %}
{% block content %}
  <h2>Musical Sense</h2>
  <div class="card">
    <p><strong>Favorite Genre:</strong> {{ profile.favorite_genre or 'N/A' }}</p>
    <p><strong>Top Artist:</strong> {{ profile.top_artist or 'N/A' }}</p>
    <p><strong>Primary Language:</strong> {{ profile.primary_language or 'N/A' }}</p>
    <p><strong>Common Instruments:</strong> {{ (profile.common_instruments or []) | join(', ') }}</p>
  </div>
  {% if profile.advancedInsights %}
  <h3>Advanced Audio Insights</h3>
  <div class="card">
    <p>{{ profile.advancedInsights }}</p>
  </div>
  {% endif %}
  {% if personalized_analysis %}
  <h3>Your Personalized Analysis</h3>
  <div class="card">
    <p>{{ personalized_analysis }}</p>
  </div>
{% endif %}
  <h3>Audio Feature Averages</h3>
  <div class="grid two">
    {% for k, v in summary.items() %}
      <div class="tile">
        <div class="title">{{ k|capitalize }}</div>
        <div class="value">
          {% if profile.ratings and profile.ratings[k] %}
            {% if v is not none %}{{ v }} {% endif %}<span class="badge">{{ profile.ratings[k] }}</span>
          {% else %}
            <span class="badge">Neutral</span>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
{% endblock %}


